# æœºå™¨å­¦ä¹ æ•™å­¦å¹³å° - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ“‹ å‰ç½®è¦æ±‚

### å¿…éœ€è½¯ä»¶
- **Node.js**: v18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: v9.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæˆ– pnpm v8.0.0+ï¼‰
- **PostgreSQL**: v15.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Redis**: v7.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Docker**: v24.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆç”¨äºä»£ç æ‰§è¡Œç¯å¢ƒï¼‰
- **Git**: v2.30 æˆ–æ›´é«˜ç‰ˆæœ¬

### æ¨èå·¥å…·
- **VS Code**: æ¨èçš„ä»£ç ç¼–è¾‘å™¨
- **Postman** æˆ– **Insomnia**: APIæµ‹è¯•å·¥å…·
- **TablePlus** æˆ– **DBeaver**: æ•°æ®åº“ç®¡ç†å·¥å…·

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†ä»“åº“

```bash
# å…‹éš†é¡¹ç›®ï¼ˆå‡è®¾å·²åˆ›å»ºä»“åº“ï¼‰
git clone https://github.com/your-org/mllearning-platform.git
cd mllearning-platform
```

### 2. é¡¹ç›®åˆå§‹åŒ–

#### åˆ›å»ºé¡¹ç›®ç»“æ„

```bash
# åˆ›å»ºä¸»ç›®å½•
mkdir mllearning-platform
cd mllearning-platform

# åˆ›å»ºå‰åç«¯å­ç›®å½•
mkdir frontend backend
```

#### åˆå§‹åŒ–å‰ç«¯é¡¹ç›®

```bash
cd frontend

# ä½¿ç”¨Next.jsåˆ›å»ºé¡¹ç›®
npx create-next-app@latest . --typescript --tailwind --app --yes

# å®‰è£…å¿…è¦ä¾èµ–
npm install @radix-ui/react-dialog @radix-ui/react-dropdown-menu
npm install framer-motion zustand @tanstack/react-query
npm install axios
npm install d3 @types/d3
npm install plotly.js react-plotly.js
npm install @monaco-editor/react
npm install katex react-katex
npm install react-markdown remark-gfm rehype-katex
npm install prismjs @types/prismjs

# å¼€å‘ä¾èµ–
npm install -D @types/react @types/node
npm install -D eslint prettier eslint-config-prettier
npm install -D @testing-library/react @testing-library/jest-dom
npm install -D jest jest-environment-jsdom
```

#### åˆå§‹åŒ–åç«¯é¡¹ç›®

```bash
cd ../backend

# åˆå§‹åŒ–Node.jsé¡¹ç›®
npm init -y

# å®‰è£…æ ¸å¿ƒä¾èµ–
npm install express cors dotenv
npm install pg redis
npm install jsonwebtoken bcrypt
npm install passport passport-google-oauth20 passport-github2
npm install joi
npm install winston
npm install multer

# å®‰è£…TypeScriptç›¸å…³
npm install -D typescript @types/node @types/express
npm install -D @types/cors @types/bcrypt @types/jsonwebtoken
npm install -D nodemon ts-node

# å¼€å‘å’Œæµ‹è¯•å·¥å…·
npm install -D jest @types/jest ts-jest
npm install -D supertest @types/supertest
npm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
npm install -D prettier

# åˆå§‹åŒ–TypeScripté…ç½®
npx tsc --init
```

### 3. ç¯å¢ƒé…ç½®

#### å‰ç«¯ç¯å¢ƒå˜é‡

åˆ›å»º `frontend/.env.local`:

```bash
# APIé…ç½®
NEXT_PUBLIC_API_URL=http://localhost:3001/api
NEXT_PUBLIC_WS_URL=ws://localhost:3001

# è®¤è¯é…ç½®
NEXT_PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id
NEXT_PUBLIC_GITHUB_CLIENT_ID=your_github_client_id

# å…¶ä»–é…ç½®
NEXT_PUBLIC_APP_NAME=MLearning
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

#### åç«¯ç¯å¢ƒå˜é‡

åˆ›å»º `backend/.env`:

```bash
# æœåŠ¡å™¨é…ç½®
NODE_ENV=development
PORT=3001
API_PREFIX=/api

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://postgres:password@localhost:5432/mllearning
DB_HOST=localhost
DB_PORT=5432
DB_NAME=mllearning
DB_USER=postgres
DB_PASSWORD=password

# Redisé…ç½®
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379

# JWTé…ç½®
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_SECRET=your-refresh-token-secret
REFRESH_TOKEN_EXPIRES_IN=7d

# OAuthé…ç½®
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=http://localhost:3001/api/auth/google/callback

GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
GITHUB_CALLBACK_URL=http://localhost:3001/api/auth/github/callback

# æ–‡ä»¶ä¸Šä¼ 
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880  # 5MB

# ä»£ç æ‰§è¡Œ
DOCKER_IMAGE=mllearning-python-sandbox
CODE_EXECUTION_TIMEOUT=5000  # 5ç§’
CODE_EXECUTION_MEMORY_LIMIT=134217728  # 128MB

# CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# æ—¥å¿—
LOG_LEVEL=debug
LOG_DIR=./logs
```

### 4. æ•°æ®åº“è®¾ç½®

#### åˆ›å»ºæ•°æ®åº“

```bash
# è¿æ¥PostgreSQL
psql -U postgres

# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE mllearning;

# é€€å‡º
\q
```

#### è¿è¡Œè¿ç§»

åˆ›å»º `backend/src/database/schema.sql`:

```sql
-- è§æŠ€æœ¯æ¶æ„æ–‡æ¡£ä¸­çš„æ•°æ®åº“è®¾è®¡éƒ¨åˆ†
-- å¤åˆ¶å®Œæ•´çš„SQL schema
```

æ‰§è¡Œè¿ç§»:

```bash
psql -U postgres -d mllearning -f src/database/schema.sql
```

### 5. Dockeré…ç½®ï¼ˆä»£ç æ‰§è¡Œç¯å¢ƒï¼‰

åˆ›å»º `backend/docker/python-sandbox/Dockerfile`:

```dockerfile
FROM python:3.11-slim

# å®‰è£…å¿…è¦çš„åº“
RUN pip install --no-cache-dir \
    numpy==1.24.0 \
    pandas==2.0.0 \
    scikit-learn==1.3.0 \
    matplotlib==3.7.0 \
    seaborn==0.12.0

# åˆ›å»ºérootç”¨æˆ·
RUN useradd -m -u 1000 sandbox && \
    mkdir -p /app && \
    chown -R sandbox:sandbox /app

USER sandbox
WORKDIR /app

CMD ["python"]
```

æ„å»ºDockeré•œåƒ:

```bash
cd backend/docker/python-sandbox
docker build -t mllearning-python-sandbox .
```

### 6. å¯åŠ¨æœåŠ¡

#### å¯åŠ¨Redis

```bash
# MacOS (ä½¿ç”¨Homebrew)
brew services start redis

# Linux
sudo systemctl start redis

# æˆ–ä½¿ç”¨Docker
docker run -d -p 6379:6379 redis:7-alpine
```

#### å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend

# å¼€å‘æ¨¡å¼
npm run dev

# æˆ–
nodemon src/index.ts
```

#### å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd frontend

# å¼€å‘æ¨¡å¼
npm run dev
```

### 7. éªŒè¯å®‰è£…

è®¿é—®ä»¥ä¸‹åœ°å€éªŒè¯ï¼š

- å‰ç«¯: http://localhost:3000
- åç«¯API: http://localhost:3001/api
- å¥åº·æ£€æŸ¥: http://localhost:3001/api/health

---

## ğŸ“ é¡¹ç›®ç»“æ„

### å®Œæ•´ç›®å½•ç»“æ„

```
mllearning-platform/
â”œâ”€â”€ frontend/                   # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/               # Next.js App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ components/        # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/            # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ lib/              # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ stores/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ styles/           # æ ·å¼
â”‚   â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ tests/                # æµ‹è¯•
â”‚   â”œâ”€â”€ .env.local            # ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ next.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/                   # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/              # APIå±‚
â”‚   â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ database/         # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ config/           # é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ docker/               # Dockeré…ç½®
â”‚   â”œâ”€â”€ tests/                # æµ‹è¯•
â”‚   â”œâ”€â”€ logs/                 # æ—¥å¿—
â”‚   â”œâ”€â”€ uploads/              # ä¸Šä¼ æ–‡ä»¶
â”‚   â”œâ”€â”€ .env                  # ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ PRD-æœºå™¨å­¦ä¹ æ•™å­¦å¹³å°.md
â”‚   â”œâ”€â”€ å¼€å‘è®¡åˆ’.md
â”‚   â”œâ”€â”€ æŠ€æœ¯æ¶æ„è®¾è®¡.md
â”‚   â””â”€â”€ UIè®¾è®¡è§„èŒƒ.md
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ docker-compose.yml         # Dockerç¼–æ’
```

---

## ğŸ”§ å…³é”®é…ç½®æ–‡ä»¶

### TypeScripté…ç½®

#### frontend/tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

#### backend/tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "moduleResolution": "node",
    "types": ["node", "jest"],
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "tests"]
}
```

### Tailwind CSSé…ç½®

#### frontend/tailwind.config.js

```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#EFF6FF',
          100: '#DBEAFE',
          200: '#BFDBFE',
          300: '#93C5FD',
          400: '#60A5FA',
          500: '#3B82F6',
          600: '#2563EB',
          700: '#1D4ED8',
          800: '#1E40AF',
          900: '#1E3A8A',
        },
        secondary: {
          50: '#FAF5FF',
          100: '#F3E8FF',
          200: '#E9D5FF',
          300: '#D8B4FE',
          400: '#C084FC',
          500: '#A855F7',
          600: '#9333EA',
          700: '#7E22CE',
          800: '#6B21A8',
          900: '#581C87',
        },
      },
      fontFamily: {
        sans: [
          '-apple-system',
          'BlinkMacSystemFont',
          'Segoe UI',
          'PingFang SC',
          'Hiragino Sans GB',
          'Microsoft YaHei',
          'sans-serif',
        ],
        mono: [
          'Fira Code',
          'JetBrains Mono',
          'Consolas',
          'Monaco',
          'monospace',
        ],
      },
      animation: {
        'fade-in': 'fadeIn 0.3s ease-in-out',
        'slide-up': 'slideUp 0.3s ease-out',
        'spin-slow': 'spin 3s linear infinite',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        slideUp: {
          '0%': { transform: 'translateY(20px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' },
        },
      },
    },
  },
  plugins: [],
}
```

### Next.jsé…ç½®

#### frontend/next.config.js

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  
  // å›¾ç‰‡ä¼˜åŒ–
  images: {
    domains: ['localhost', 'your-cdn-domain.com'],
    formats: ['image/avif', 'image/webp'],
  },
  
  // ç¯å¢ƒå˜é‡
  env: {
    NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL,
  },
  
  // å›½é™…åŒ–ï¼ˆæœªæ¥æ‰©å±•ï¼‰
  i18n: {
    locales: ['zh-CN', 'en-US'],
    defaultLocale: 'zh-CN',
  },
  
  // æ€§èƒ½ä¼˜åŒ–
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  },
  
  // å®éªŒæ€§åŠŸèƒ½
  experimental: {
    serverActions: true,
  },
}

module.exports = nextConfig
```

### ESLinté…ç½®

#### .eslintrc.json

```json
{
  "extends": [
    "next/core-web-vitals",
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "prettier"
  ],
  "parser": "@typescript-eslint/parser",
  "plugins": ["@typescript-eslint"],
  "rules": {
    "@typescript-eslint/no-unused-vars": "warn",
    "@typescript-eslint/no-explicit-any": "warn",
    "no-console": "warn"
  }
}
```

### Prettieré…ç½®

#### .prettierrc

```json
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 80,
  "arrowParens": "always"
}
```

### Docker Compose

#### docker-compose.yml

```yaml
version: '3.8'

services:
  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:15-alpine
    container_name: mllearning-postgres
    environment:
      POSTGRES_DB: mllearning
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    container_name: mllearning-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: unless-stopped

  # åç«¯APIï¼ˆå¯é€‰ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰
  # api:
  #   build:
  #     context: ./backend
  #     dockerfile: Dockerfile
  #   container_name: mllearning-api
  #   ports:
  #     - "3001:3001"
  #   environment:
  #     - NODE_ENV=production
  #     - DATABASE_URL=postgresql://postgres:password@postgres:5432/mllearning
  #     - REDIS_URL=redis://redis:6379
  #   depends_on:
  #     - postgres
  #     - redis
  #   restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
```

---

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# å‰ç«¯æµ‹è¯•
cd frontend
npm run test

# åç«¯æµ‹è¯•
cd backend
npm run test

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

### ç¼–å†™æµ‹è¯•ç¤ºä¾‹

```typescript
// frontend/tests/components/Button.test.tsx
import { render, screen, fireEvent } from '@testing-library/react'
import { Button } from '@/components/ui/Button'

describe('Buttonç»„ä»¶', () => {
  it('åº”è¯¥æ­£ç¡®æ¸²æŸ“', () => {
    render(<Button>ç‚¹å‡»æˆ‘</Button>)
    expect(screen.getByText('ç‚¹å‡»æˆ‘')).toBeInTheDocument()
  })
  
  it('ç‚¹å‡»æ—¶åº”è¯¥è§¦å‘å›è°ƒ', () => {
    const handleClick = jest.fn()
    render(<Button onClick={handleClick}>ç‚¹å‡»æˆ‘</Button>)
    
    fireEvent.click(screen.getByText('ç‚¹å‡»æˆ‘'))
    expect(handleClick).toHaveBeenCalledTimes(1)
  })
})
```

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3000
lsof -i :3001

# ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>
```

### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

- æ£€æŸ¥PostgreSQLæ˜¯å¦è¿è¡Œ
- éªŒè¯.envä¸­çš„æ•°æ®åº“é…ç½®
- ç¡®ä¿æ•°æ®åº“å·²åˆ›å»º

### 3. Redisè¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥RedisçŠ¶æ€
redis-cli ping
# åº”è¿”å› PONG
```

### 4. Dockeré•œåƒæ„å»ºå¤±è´¥

```bash
# æ¸…ç†Dockerç¼“å­˜
docker system prune -a

# é‡æ–°æ„å»º
docker build -t mllearning-python-sandbox .
```

---

## ğŸ“š ä¸‹ä¸€æ­¥

1. **é˜…è¯»PRDæ–‡æ¡£**: äº†è§£äº§å“éœ€æ±‚
2. **æŸ¥çœ‹æŠ€æœ¯æ¶æ„**: ç†è§£ç³»ç»Ÿè®¾è®¡
3. **å‚è€ƒUIè®¾è®¡è§„èŒƒ**: å¼€å§‹å¼€å‘ç•Œé¢
4. **æŒ‰ç…§å¼€å‘è®¡åˆ’**: é€æ­¥å®ç°åŠŸèƒ½

---

## ğŸ¤ å›¢é˜Ÿåä½œ

### Gitå·¥ä½œæµ

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/user-auth

# æäº¤ä»£ç 
git add .
git commit -m "feat: å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½"

# æ¨é€åˆ°è¿œç¨‹
git push origin feature/user-auth

# åˆ›å»ºPull Requestè¿›è¡Œä»£ç å®¡æŸ¥
```

### Commitè§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: Bugä¿®å¤
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·é“¾æ›´æ–°
```

---

## ğŸ“ è·å–å¸®åŠ©

- **æŠ€æœ¯é—®é¢˜**: æŸ¥çœ‹æ–‡æ¡£æˆ–åœ¨å›¢é˜Ÿç¾¤æé—®
- **BugæŠ¥å‘Š**: åœ¨GitHub Issuesä¸­åˆ›å»º
- **åŠŸèƒ½å»ºè®®**: é€šè¿‡Discordè®¨è®º

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€




